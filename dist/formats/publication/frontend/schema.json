{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "base_path",
    "content_id",
    "description",
    "details",
    "document_type",
    "links",
    "locale",
    "public_updated_at",
    "schema_name",
    "title",
    "updated_at"
  ],
  "properties": {
    "analytics_identifier": {
      "$ref": "#/definitions/analytics_identifier"
    },
    "base_path": {
      "$ref": "#/definitions/absolute_path"
    },
    "content_id": {
      "$ref": "#/definitions/guid"
    },
    "description": {
      "$ref": "#/definitions/description_optional"
    },
    "details": {
      "$ref": "#/definitions/details"
    },
    "document_type": {
      "enum": [
        "guidance",
        "form",
        "foi_release",
        "promotional",
        "notice",
        "correspondence",
        "research",
        "official_statistics",
        "transparency",
        "statutory_guidance",
        "independent_report",
        "national_statistics",
        "corporate_report",
        "policy_paper",
        "decision",
        "map",
        "regulation",
        "international_treaty",
        "impact_assessment",
        "publication",
        "imported"
      ],
      "type": "string"
    },
    "email_document_supertype": {
      "description": "Document supertype grouping intended to power the Whitehall finders and email subscriptions",
      "type": "string"
    },
    "first_published_at": {
      "anyOf": [
        {
          "$ref": "#/definitions/first_published_at"
        },
        {
          "type": "null"
        }
      ]
    },
    "government_document_supertype": {
      "description": "Document supertype grouping intended to power the Whitehall finders and email subscriptions",
      "type": "string"
    },
    "links": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "available_translations": {
          "description": "Link type automatically added by Publishing API",
          "$ref": "#/definitions/frontend_links"
        },
        "child_taxons": {
          "description": "Link type automatically added by Publishing API",
          "$ref": "#/definitions/frontend_links"
        },
        "children": {
          "description": "Link type automatically added by Publishing API",
          "$ref": "#/definitions/frontend_links"
        },
        "document_collections": {
          "description": "Link type automatically added by Publishing API",
          "$ref": "#/definitions/frontend_links"
        },
        "mainstream_browse_content": {
          "description": "Link type automatically added by Publishing API",
          "$ref": "#/definitions/frontend_links"
        },
        "mainstream_browse_pages": {
          "description": "Powers the /browse section of the site. These are known as sections in some legacy apps.",
          "$ref": "#/definitions/frontend_links"
        },
        "meets_user_needs": {
          "description": "The user needs this piece of content meets.",
          "$ref": "#/definitions/frontend_links"
        },
        "ministers": {
          "$ref": "#/definitions/frontend_links"
        },
        "ordered_related_items": {
          "description": "Related items, can be any page on GOV.UK. Mostly used for mainstream content to power the sidebar. Ordering of the links is determined by the editor in Content Tagger.",
          "$ref": "#/definitions/frontend_links"
        },
        "ordered_related_items_overrides": {
          "description": "Related items, can be any page on GOV.UK. Overrides 'more like this' automatically generated links in the beta navigation.",
          "$ref": "#/definitions/frontend_links"
        },
        "organisations": {
          "$ref": "#/definitions/frontend_links"
        },
        "parent": {
          "$ref": "#/definitions/frontend_links"
        },
        "people": {
          "description": "Used to power Email Alert Api subscriptions for Whitehall content",
          "$ref": "#/definitions/frontend_links"
        },
        "policies": {
          "description": "Link type automatically added by Publishing API",
          "$ref": "#/definitions/frontend_links"
        },
        "policy_areas": {
          "description": "A largely deprecated tag currently only used to power email alerts.",
          "$ref": "#/definitions/frontend_links"
        },
        "primary_publishing_organisation": {
          "description": "The organisation that published the page. Corresponds to the first of the 'Lead organisations' in Whitehall, and is empty for all other publishing applications.",
          "maxItems": 1,
          "$ref": "#/definitions/frontend_links"
        },
        "related_policies": {
          "$ref": "#/definitions/frontend_links"
        },
        "related_statistical_data_sets": {
          "$ref": "#/definitions/frontend_links"
        },
        "roles": {
          "description": "Used to power Email Alert Api subscriptions for Whitehall content",
          "$ref": "#/definitions/frontend_links"
        },
        "taxons": {
          "description": "Prototype-stage taxonomy label for this content item",
          "$ref": "#/definitions/frontend_links"
        },
        "topic_content": {
          "description": "Link type automatically added by Publishing API",
          "$ref": "#/definitions/frontend_links"
        },
        "topical_events": {
          "$ref": "#/definitions/frontend_links"
        },
        "topics": {
          "$ref": "#/definitions/frontend_links"
        },
        "world_locations": {
          "$ref": "#/definitions/frontend_links"
        }
      }
    },
    "locale": {
      "$ref": "#/definitions/locale"
    },
    "navigation_document_supertype": {
      "description": "Document type grouping powering the new taxonomy-based navigation pages",
      "type": "string"
    },
    "need_ids": {
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "phase": {
      "description": "The service design phase of this content item - https://www.gov.uk/service-manual/phases",
      "enum": [
        "alpha",
        "beta",
        "live"
      ],
      "type": "string"
    },
    "public_updated_at": {
      "anyOf": [
        {
          "$ref": "#/definitions/public_updated_at"
        },
        {
          "type": "null"
        }
      ]
    },
    "publishing_app": {
      "$ref": "#/definitions/publishing_app_name"
    },
    "publishing_request_id": {
      "$ref": "#/definitions/publishing_request_id"
    },
    "rendering_app": {
      "$ref": "#/definitions/rendering_app"
    },
    "schema_name": {
      "enum": [
        "publication"
      ],
      "type": "string"
    },
    "title": {
      "$ref": "#/definitions/title"
    },
    "updated_at": {
      "format": "date-time",
      "type": "string"
    },
    "user_journey_document_supertype": {
      "description": "Document type grouping powering analytics of user journeys",
      "type": "string"
    },
    "withdrawn_notice": {
      "$ref": "#/definitions/withdrawn_notice"
    }
  },
  "definitions": {
    "absolute_path": {
      "description": "A path only. Query string and/or fragment are not allowed.",
      "pattern": "^/(([a-zA-Z0-9._~!$&'()*+,;=:@-]|%[0-9a-fA-F]{2})+(/([a-zA-Z0-9._~!$&'()*+,;=:@-]|%[0-9a-fA-F]{2})*)*)?$",
      "type": "string"
    },
    "analytics_identifier": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "description": "A short identifier we send to Google Analytics for multi-valued fields. This means we avoid the truncated values we would get if we sent the path or slug of eg organisations."
    },
    "attachments_with_thumbnails": {
      "description": "An ordered list of attachments",
      "items": {
        "description": "Generated HTML for each attachment including thumbnail and download link",
        "type": "string"
      },
      "type": "array"
    },
    "body": {
      "description": "The main content provided as HTML rendered from govspeak",
      "type": "string"
    },
    "change_history": {
      "items": {
        "additionalProperties": false,
        "properties": {
          "note": {
            "description": "A summary of the change",
            "type": "string"
          },
          "public_timestamp": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "public_timestamp",
          "note"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "description": {
      "type": "string"
    },
    "description_optional": {
      "anyOf": [
        {
          "$ref": "#/definitions/description"
        },
        {
          "type": "null"
        }
      ]
    },
    "details": {
      "additionalProperties": false,
      "properties": {
        "body": {
          "$ref": "#/definitions/body"
        },
        "change_history": {
          "$ref": "#/definitions/change_history"
        },
        "documents": {
          "$ref": "#/definitions/attachments_with_thumbnails"
        },
        "emphasised_organisations": {
          "$ref": "#/definitions/emphasised_organisations"
        },
        "first_public_at": {
          "$ref": "#/definitions/first_public_at"
        },
        "government": {
          "$ref": "#/definitions/government"
        },
        "national_applicability": {
          "$ref": "#/definitions/national_applicability"
        },
        "political": {
          "$ref": "#/definitions/political"
        },
        "tags": {
          "$ref": "#/definitions/tags"
        }
      },
      "required": [
        "body",
        "documents",
        "first_public_at",
        "government",
        "political"
      ],
      "type": "object"
    },
    "emphasised_organisations": {
      "description": "The content ids of the organisations that should be displayed first in the list of organisations related to the item, these content ids must be present in the item organisation links hash.",
      "items": {
        "$ref": "#/definitions/guid"
      },
      "type": "array"
    },
    "first_public_at": {
      "description": "DEPRECATED. The date the content was first published. Used in details. Will be deprecated in favour of top level first_published_at when publishing API allows it to be edited.",
      "format": "date-time",
      "type": "string"
    },
    "first_published_at": {
      "description": "The date the content was first published.  Automatically determined by the publishing-api, unless overridden by the publishing application.",
      "format": "date-time",
      "type": "string"
    },
    "frontend_links": {
      "items": {
        "additionalProperties": true,
        "properties": {
          "analytics_identifier": {
            "$ref": "#/definitions/analytics_identifier"
          },
          "api_path": {
            "$ref": "#/definitions/absolute_path"
          },
          "api_url": {
            "description": "DEPRECATED: api_path should be used instead of api_url. This is due to values of api_url being tied to an environment which can cause problems when data is synced between environments. In time this field will be removed by the Publishing Platform team.",
            "format": "uri",
            "type": "string"
          },
          "base_path": {
            "$ref": "#/definitions/absolute_path"
          },
          "content_id": {
            "$ref": "#/definitions/guid"
          },
          "document_type": {
            "type": "string"
          },
          "locale": {
            "$ref": "#/definitions/locale"
          },
          "public_updated_at": {
            "type": "string"
          },
          "schema_name": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "web_url": {
            "description": "DEPRECATED: base_path should be used instead of web_url. This is due to values of web_url being tied to an environment which can cause problems when data is synced between environments. In time this field will be removed by the Publishing Platform team.",
            "format": "uri",
            "type": "string"
          }
        },
        "required": [
          "content_id",
          "title",
          "locale"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "government": {
      "additionalProperties": false,
      "properties": {
        "current": {
          "description": "Is the government that published this document still the current government.",
          "type": "boolean"
        },
        "slug": {
          "description": "Government slug, used for analytics, eg '1970-to-1974-conservative-government'.",
          "type": "string"
        },
        "title": {
          "description": "Name of the government that first published this document, eg '1970 to 1974 Conservative government'.",
          "type": "string"
        }
      },
      "required": [
        "title",
        "slug",
        "current"
      ],
      "type": "object"
    },
    "guid": {
      "pattern": "^[a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}$",
      "type": "string"
    },
    "locale": {
      "enum": [
        "ar",
        "az",
        "be",
        "bg",
        "bn",
        "cs",
        "cy",
        "de",
        "dr",
        "el",
        "en",
        "es",
        "es-419",
        "et",
        "fa",
        "fr",
        "he",
        "hi",
        "hu",
        "hy",
        "id",
        "it",
        "ja",
        "ka",
        "ko",
        "lt",
        "lv",
        "ms",
        "pl",
        "ps",
        "pt",
        "ro",
        "ru",
        "si",
        "sk",
        "so",
        "sq",
        "sr",
        "sw",
        "ta",
        "th",
        "tk",
        "tr",
        "uk",
        "ur",
        "uz",
        "vi",
        "zh",
        "zh-hk",
        "zh-tw"
      ],
      "type": "string"
    },
    "nation_applicability": {
      "additionalProperties": false,
      "description": "An object specifying the applicability of a particular nation.",
      "properties": {
        "alternative_url": {
          "description": "An optional alternative URL to link to for more information on this content item pertaining to this nation.",
          "type": "string"
        },
        "applicable": {
          "description": "Whether the content applies to this nation or not.",
          "type": "boolean"
        },
        "label": {
          "description": "The pretty-printed, translated label for this nation.",
          "type": "string"
        }
      },
      "type": "object"
    },
    "national_applicability": {
      "additionalProperties": false,
      "description": "An object specifying the applicable nations for this content item. If it applies to all nations, it should be omitted.",
      "properties": {
        "england": {
          "$ref": "#/definitions/nation_applicability"
        },
        "northern_ireland": {
          "$ref": "#/definitions/nation_applicability"
        },
        "scotland": {
          "$ref": "#/definitions/nation_applicability"
        },
        "wales": {
          "$ref": "#/definitions/nation_applicability"
        }
      },
      "type": "object"
    },
    "political": {
      "description": "If the content is considered political in nature, reflecting views of the government it was published under.",
      "type": "boolean"
    },
    "public_updated_at": {
      "description": "When the content was last significantly changed (a major update). Shown to users.  Automatically determined by the publishing-api, unless overridden by the publishing application.",
      "format": "date-time",
      "type": "string"
    },
    "publishing_app_name": {
      "description": "The application that published this item.",
      "enum": [
        "calculators",
        "calendars",
        "collections-publisher",
        "contacts",
        "content-tagger",
        "design-principles",
        "external-link-tracker",
        "feedback",
        "frontend",
        "hmrc-manuals-api",
        "info-frontend",
        "licencefinder",
        "manuals-frontend",
        "manuals-publisher",
        "maslow",
        "need-api",
        "performanceplatform-big-screen-view",
        "policy-publisher",
        "publisher",
        "rummager",
        "service-manual-publisher",
        "share-sale-publisher",
        "short-url-manager",
        "smartanswers",
        "specialist-publisher",
        "spotlight",
        "static",
        "tariff",
        "travel-advice-publisher",
        "whitehall"
      ],
      "type": "string"
    },
    "publishing_request_id": {
      "description": "A unique identifier used to track publishing requests to rendered content",
      "type": "string"
    },
    "rendering_app": {
      "description": "The application that renders this item.",
      "enum": [
        "calculators",
        "calendars",
        "collections",
        "designprinciples",
        "email-alert-frontend",
        "email-campaign-frontend",
        "feedback",
        "finder-frontend",
        "frontend",
        "government-frontend",
        "info-frontend",
        "licencefinder",
        "manuals-frontend",
        "performanceplatform-big-screen-view",
        "publicapi",
        "rummager",
        "service-manual-frontend",
        "smartanswers",
        "spotlight",
        "static",
        "tariff",
        "whitehall-frontend"
      ],
      "type": "string"
    },
    "tags": {
      "additionalProperties": false,
      "description": "Field used by email-alert-api to trigger email alerts for subscriptions to topics (gov.uk/topic) and policies (gov.uk/policies).",
      "properties": {
        "additional_topics": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "browse_pages": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "policies": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "primary_topic": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "topics": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "title": {
      "type": "string"
    },
    "withdrawn_notice": {
      "additionalProperties": false,
      "properties": {
        "explanation": {
          "type": "string"
        },
        "withdrawn_at": {
          "format": "date-time"
        }
      },
      "type": "object"
    }
  }
}
